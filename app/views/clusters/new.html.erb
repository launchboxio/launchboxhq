<div class="card">
  <%= form_for(@cluster) do |f| %>
  <div class="card-header">Create new cluster</div>
  <div class="card-body">
    <div class="form-group">
      <%= f.label :name, "Name"%>
      <%= f.text_field :name, class: "form-control" %>
    </div>
    <div class="form-group">
      <%= f.label :provider, "Provider"%>
      <%= f.text_field :provider, class: "form-control" %>
    </div>
    <div class="form-group">
      <%= f.label :region, "Region"%>
      <%= f.text_field :region, class: "form-control" %>
    </div>
    <div class="form-group">
      <div class="form-check">
        <%= f.radio_button :connection_type, "agent", class: "form-check-input", checked: true %>
        <%= f.label :connection_type, 'Agent', :value => 'agent', class: "form-check-label" %>
      </div>
      <div class="form-check">
        <%= f.radio_button :connection_type, "service_account", class: "form-check-input" %>
        <%= f.label :connection_type, 'Service Account', :value => 'service_account', class: "form-check-label" %>
      </div>
    </div>
    <div id="agent">
      Agent configuration
    </div>
    <div id="service_account" style="display:none;">
      <div class="form-group">
        <%= f.label :host, "Host"%>
        <%= f.text_field :host, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :ca_crt, "CA Certificate"%>
        <%= f.text_area :ca_crt, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :token, "Token"%>
        <%= f.password_field :token, class: "form-control" %>
      </div>
    </div>
  </div>
  <div class="card-footer">
    <button class="btn" type="submit">Create</button>
  </div>
  <% end %>
</div>

<script type="text/javascript" charset="utf-8">
  // Attach to radio buttons
  $(document).ready(function(){
    $('input[type=radio]').click(function(){
      // If agent, show agent configuration
      if (this.value === "agent") {
        $("#agent").show()
        $("#service_account").hide()
      } else {
        $("#agent").hide()
        $("#service_account").show()
      }
    });
  });

</script>